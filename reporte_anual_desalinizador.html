<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reporte Anual del Prototipo de Desalinización Solar</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            color: #333;
            background-color: #f5f9fd;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        header {
            background-color: #1565c0;
            color: white;
            padding: 20px 0;
            text-align: center;
            margin-bottom: 30px;
            border-radius: 0 0 10px 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        h1 {
            margin: 0;
            font-size: 2.2em;
        }
        h2 {
            color: #1565c0;
            border-bottom: 2px solid #1565c0;
            padding-bottom: 10px;
            margin-top: 40px;
        }
        h3 {
            color: #1976d2;
        }
        .card {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            padding: 20px;
            margin-bottom: 20px;
        }
        .stats-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            margin: 20px 0;
        }
        .stat-card {
            flex-basis: 23%;
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            padding: 15px;
            margin-bottom: 15px;
            text-align: center;
        }
        .stat-value {
            font-size: 1.8em;
            font-weight: bold;
            color: #1976d2;
            margin: 10px 0;
        }
        .stat-label {
            font-size: 0.9em;
            color: #666;
        }
        .chart-container {
            margin: 30px 0;
        }
        .img-fluid {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            box-shadow: 0 3px 10px rgba(0,0,0,0.1);
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
            background-color: white;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            border-radius: 8px;
            overflow: hidden;
        }
        th, td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        th {
            background-color: #1976d2;
            color: white;
        }
        tr:nth-child(even) {
            background-color: #f2f7ff;
        }
        .efficiency-meter {
            height: 20px;
            border-radius: 10px;
            background-color: #e0e0e0;
            position: relative;
            overflow: hidden;
            margin: 10px 0;
        }
        .efficiency-fill {
            height: 100%;
            background: linear-gradient(to right, #64b5f6, #1976d2);
            border-radius: 10px;
        }
        footer {
            text-align: center;
            padding: 20px;
            margin-top: 50px;
            background-color: #1565c0;
            color: white;
            border-radius: 10px 10px 0 0;
        }
        .system-diagram {
            display: flex;
            justify-content: center;
            margin: 30px 0;
            flex-wrap: wrap;
        }
        .system-component {
            text-align: center;
            padding: 15px;
            margin: 0 10px;
            background-color: #e3f2fd;
            border-radius: 8px;
            width: 150px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .system-arrow {
            display: flex;
            align-items: center;
            color: #1976d2;
            font-size: 24px;
        }
        .highlight {
            background-color: #fff8e1;
            padding: 15px;
            border-left: 5px solid #ffc107;
            margin: 20px 0;
        }
        .seasonal-stats {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 20px;
            margin: 20px 0;
        }
        .season-card {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
            padding: 15px;
            display: flex;
            flex-direction: column;
        }
        .season-card h4 {
            margin-top: 0;
            color: #1976d2;
            border-bottom: 1px solid #f0f0f0;
            padding-bottom: 10px;
        }
        .season-stats {
            display: flex;
            justify-content: space-between;
        }
        .badge {
            display: inline-block;
            background-color: #1976d2;
            color: white;
            border-radius: 15px;
            padding: 5px 15px;
            font-size: 0.9em;
            margin-top: 10px;
        }
    </style>
    <script src="datos_simulacion.js"></script>
</head>
<body>
    <header>
        <div class="container">
            <h1>Reporte Anual de Simulación</h1>
            <p>Modelo Termodinámico Avanzado de Desalinización Solar</p>
        </div>
    </header>

    <div class="container">
        <div class="card">
            <h2>Descripción del Prototipo</h2>
            <p>Este sistema de desalinización solar ha sido modelado con un enfoque termodinámico avanzado para transformar agua salada en agua potable. El modelo incluye un análisis detallado de la transferencia de calor, eficiencia energética y producción de agua en función de variables climáticas reales (radiación solar, temperatura ambiente, humedad y viento).</p>
            
            <div class="system-diagram">
                <div class="system-component">
                    <h4>Captador Solar</h4>
                    <p>Absorptividad: 0.9</p>
                </div>
                <div class="system-arrow">→</div>
                <div class="system-component">
                    <h4>Evaporador</h4>
                    <p>Temp: ~60°C</p>
                </div>
                <div class="system-arrow">→</div>
                <div class="system-component">
                    <h4>Sistema Térmico</h4>
                    <p>Resistencia térmica optimizada</p>
                </div>
                <div class="system-arrow">→</div>
                <div class="system-component">
                    <h4>Condensador</h4>
                    <p>Eficiencia: 65-85%</p>
                </div>
            </div>
        </div>

        <h2>Estadísticas Anuales</h2>
        <div class="stats-container">
            <div class="stat-card">
                <div class="stat-label">Producción Total</div>
                <div class="stat-value" id="produccion-total">---</div>
                <div class="stat-label">litros/año</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Producción Media</div>
                <div class="stat-value" id="produccion-media">---</div>
                <div class="stat-label">litros/día</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">Radiación Media</div>
                <div class="stat-value" id="radiacion-media">---</div>
                <div class="stat-label">W/m²</div>
            </div>
            <div class="stat-card">
                <div class="stat-label">GOR Medio</div>
                <div class="stat-value" id="gor-medio">---</div>
                <div class="stat-label">eficiencia</div>
            </div>
        </div>

        <div class="card">
            <h3>Rendimiento del Sistema</h3>
            <p>El sistema ha sido evaluado con un modelo termodinámico avanzado que considera las variaciones estacionales de radiación solar, temperatura ambiente, velocidad del viento y humedad relativa. Incluye análisis detallado de pérdidas térmicas por conducción, convección y radiación.</p>
            
            <div class="highlight">
                <h4>Días de Alta Producción</h4>
                <p>El sistema alcanza su máxima eficiencia cuando la radiación solar supera los 800 W/m² y la temperatura ambiente es favorable.</p>
                <div class="efficiency-meter">
                    <div class="efficiency-fill" style="width: 85%"></div>
                </div>
                <p id="dias-alta-produccion">Días con producción superior a la media: ---</p>
            </div>
            
            <div class="highlight">
                <h4>Días de Baja Producción</h4>
                <p>En días con radiación inferior a 400 W/m² o temperaturas bajas, el rendimiento disminuye significativamente debido a las pérdidas térmicas.</p>
                <div class="efficiency-meter">
                    <div class="efficiency-fill" style="width: 35%"></div>
                </div>
                <p id="dias-baja-produccion">Días con producción inferior a la mitad de la media: ---</p>
            </div>
        </div>

        <div class="chart-container">
            <h2>Gráficas de Rendimiento Anual</h2>
            <h3>Producción Diaria y Parámetros Climáticos</h3>
            <img src="resultados/simulacion_20250529_2247_anual.png" alt="Gráficas de rendimiento anual" class="img-fluid">
            <p class="text-center"><small>Gráfica completa que muestra la evolución anual de producción, radiación solar, temperatura, humedad relativa, GOR y pérdidas térmicas</small></p>
        </div>

        <h2>Distribución Estacional</h2>
        <div class="seasonal-stats">
            <div class="season-card">
                <h4>Verano</h4>
                <div class="season-stats">
                    <div>
                        <p>Producción: <strong id="verano-prod">---</strong> litros</p>
                        <p>Temperatura media: <strong>≈ 69°C</strong></p>
                    </div>
                    <div>
                        <p>GOR medio: <strong id="verano-gor">---</strong></p>
                        <p>Porcentaje anual: <strong id="verano-pct">---</strong></p>
                    </div>
                </div>
                <span class="badge">Mayor Producción</span>
            </div>
            <div class="season-card">
                <h4>Primavera</h4>
                <div class="season-stats">
                    <div>
                        <p>Producción: <strong id="primavera-prod">---</strong> litros</p>
                        <p>Temperatura media: <strong>≈ 62°C</strong></p>
                    </div>
                    <div>
                        <p>GOR medio: <strong id="primavera-gor">---</strong></p>
                        <p>Porcentaje anual: <strong id="primavera-pct">---</strong></p>
                    </div>
                </div>
            </div>
            <div class="season-card">
                <h4>Otoño</h4>
                <div class="season-stats">
                    <div>
                        <p>Producción: <strong id="otono-prod">---</strong> litros</p>
                        <p>Temperatura media: <strong>≈ 48°C</strong></p>
                    </div>
                    <div>
                        <p>GOR medio: <strong id="otono-gor">---</strong></p>
                        <p>Porcentaje anual: <strong id="otono-pct">---</strong></p>
                    </div>
                </div>
            </div>
            <div class="season-card">
                <h4>Invierno</h4>
                <div class="season-stats">
                    <div>
                        <p>Producción: <strong id="invierno-prod">---</strong> litros</p>
                        <p>Temperatura media: <strong>≈ 42°C</strong></p>
                    </div>
                    <div>
                        <p>GOR medio: <strong id="invierno-gor">---</strong></p>
                        <p>Porcentaje anual: <strong id="invierno-pct">---</strong></p>
                    </div>
                </div>
                <span class="badge" style="background-color: #607d8b;">Menor Producción</span>
            </div>
        </div>

        <div class="chart-container">
            <h3>Análisis Estacional Comparativo</h3>
            <img src="resultados/simulacion_202505_estacional.png" alt="Análisis estacional comparativo" class="img-fluid">
            <p class="text-center"><small>Comparación de la producción y eficiencia por estación del año</small></p>
        </div>

        <div class="chart-container">
            <h2>Producción Mensual</h2>
            <img src="resultados/simulacion_20250529_2247_mensual.png" alt="Producción mensual de agua desalinizada" class="img-fluid">
            <p class="text-center"><small>Distribución mensual de producción de agua y eficiencia GOR</small></p>
        </div>

        <h2>Producción Detallada por Mes</h2>
        <table>
            <thead>
                <tr>
                    <th>Mes</th>
                    <th>Producción (litros)</th>
                    <th>Radiación Media (W/m²)</th>
                    <th>GOR</th>
                    <th>Temperatura (°C)</th>
                </tr>
            </thead>
            <tbody id="tabla-mensual">
                <!-- Los datos se cargarán dinámicamente desde JavaScript -->
            </tbody>
        </table>

        <div class="card">
            <h2>Análisis Energético</h2>
            <img src="resultados/simulacion_202505_energia.png" alt="Análisis energético" class="img-fluid">
            <p class="text-center"><small>Balance entre energía solar, energía útil y pérdidas térmicas</small></p>
            
            <div id="balance-energetico" class="highlight">
                <h4>Balance Energético</h4>
                <ul>
                    <li>Energía solar media diaria: <strong id="energia-solar">---</strong> kJ</li>
                    <li>Pérdidas térmicas medias: <strong id="perdidas-termicas">---</strong> W</li>
                    <li>Eficiencia térmica media: <strong id="eficiencia-termica">---</strong></li>
                </ul>
            </div>
        </div>

        <div class="card">
            <h2>Conclusiones</h2>
            <p>El modelo termodinámico avanzado del sistema de desalinización solar muestra resultados realistas con una marcada variación estacional. Las conclusiones principales son:</p>
            <ul>
                <li>Producción total anual de <strong id="prod-anual-conclusion">---</strong> litros, con picos en los meses de <strong>mayo y junio</strong></li>
                <li>La mayor parte de la producción (<strong id="prod-verano-primavera">---</strong>%) se concentra en primavera y verano</li>
                <li>Existe una correlación directa entre radiación solar y producción (<strong id="correlacion-rad-prod">---</strong>)</li>
                <li>Las pérdidas térmicas representan aproximadamente un <strong id="pct-perdidas">---</strong>% de la energía solar recibida</li>
            </ul>
            <p>Para mejorar el rendimiento del sistema, se recomienda:</p>
            <ul>
                <li>Aumentar la superficie de captación solar (actualmente <strong id="area-captacion">---</strong> m²)</li>
                <li>Mejorar el aislamiento térmico de todo el sistema para reducir pérdidas</li>
                <li>Optimizar el diseño del condensador para mejorar la eficiencia en la recuperación del agua</li>
                <li>Implementar sistemas de seguimiento solar para maximizar la radiación captada</li>
            </ul>
        </div>
    </div>

    <footer>
        <div class="container">
            <p>Simulación termodinámica avanzada del prototipo de desalinización solar</p>
            <p>&copy; 2024 - Modelo termodinámico completo</p>
        </div>
    </footer>

    <script>
        // Objeto para almacenar los datos
        const datosSimulacion = {
            produccion_total: 0,
            produccion_media: 0,
            radiacion_media: 0,
            gor_medio: 0,
            dias_alta_produccion: 0,
            dias_baja_produccion: 0,
            datos_mensuales: [],
            datos_estacionales: {
                "Invierno": { produccion: 0.03, gor: 0.006, porcentaje: 0.9 },
                "Primavera": { produccion: 1.63, gor: 0.0946, porcentaje: 44.9 },
                "Verano": { produccion: 1.85, gor: 0.0813, porcentaje: 50.7 },
                "Otoño": { produccion: 0.13, gor: 0.0166, porcentaje: 3.5 }
            },
            energia_solar: 951.08,
            perdidas_termicas: 40.62,
            eficiencia_termica: 36.15,
            area_captacion: 0.1125,
            correlacion_rad_prod: 0.8378
        };
        
        // Función para actualizar la interfaz con los datos cargados
        function actualizarInterfaz() {
            // Actualizar estadísticas principales
            document.getElementById("produccion-total").textContent = datosSimulacion.produccion_total.toFixed(2);
            document.getElementById("produccion-media").textContent = datosSimulacion.produccion_media.toFixed(2);
            document.getElementById("radiacion-media").textContent = datosSimulacion.radiacion_media.toFixed(2);
            document.getElementById("gor-medio").textContent = datosSimulacion.gor_medio.toFixed(4);
            
            // Actualizar días de alta/baja producción
            document.getElementById("dias-alta-produccion").textContent = 
                `Días con producción superior a la media: ${datosSimulacion.dias_alta_produccion}`;
            document.getElementById("dias-baja-produccion").textContent = 
                `Días con producción inferior a la mitad de la media: ${datosSimulacion.dias_baja_produccion}`;
            
            // Actualizar tabla mensual
            const tablaMensual = document.getElementById("tabla-mensual");
            tablaMensual.innerHTML = "";
            
            datosSimulacion.datos_mensuales.forEach(dato => {
                const fila = document.createElement("tr");
                let tempCol = "";
                
                // Buscar la temperatura si está disponible
                if (dato.temp_agua_C !== undefined) {
                    tempCol = dato.temp_agua_C.toFixed(1);
                } else {
                    tempCol = "N/A";
                }
                
                fila.innerHTML = `
                    <td>${dato.mes}</td>
                    <td>${dato.produccion.toFixed(2)}</td>
                    <td>${dato.radiacion.toFixed(2)}</td>
                    <td>${dato.gor.toFixed(4)}</td>
                    <td>${tempCol}</td>
                `;
                tablaMensual.appendChild(fila);
            });
            
            // Actualizar datos estacionales
            document.getElementById("verano-prod").textContent = datosSimulacion.datos_estacionales.Verano.produccion.toFixed(2);
            document.getElementById("verano-gor").textContent = datosSimulacion.datos_estacionales.Verano.gor.toFixed(4);
            document.getElementById("verano-pct").textContent = datosSimulacion.datos_estacionales.Verano.porcentaje.toFixed(1) + "%";
            
            document.getElementById("primavera-prod").textContent = datosSimulacion.datos_estacionales.Primavera.produccion.toFixed(2);
            document.getElementById("primavera-gor").textContent = datosSimulacion.datos_estacionales.Primavera.gor.toFixed(4);
            document.getElementById("primavera-pct").textContent = datosSimulacion.datos_estacionales.Primavera.porcentaje.toFixed(1) + "%";
            
            document.getElementById("otono-prod").textContent = datosSimulacion.datos_estacionales.Otoño.produccion.toFixed(2);
            document.getElementById("otono-gor").textContent = datosSimulacion.datos_estacionales.Otoño.gor.toFixed(4);
            document.getElementById("otono-pct").textContent = datosSimulacion.datos_estacionales.Otoño.porcentaje.toFixed(1) + "%";
            
            document.getElementById("invierno-prod").textContent = datosSimulacion.datos_estacionales.Invierno.produccion.toFixed(2);
            document.getElementById("invierno-gor").textContent = datosSimulacion.datos_estacionales.Invierno.gor.toFixed(4);
            document.getElementById("invierno-pct").textContent = datosSimulacion.datos_estacionales.Invierno.porcentaje.toFixed(1) + "%";
            
            // Actualizar análisis energético
            document.getElementById("energia-solar").textContent = datosSimulacion.energia_solar.toFixed(2);
            document.getElementById("perdidas-termicas").textContent = datosSimulacion.perdidas_termicas.toFixed(2);
            document.getElementById("eficiencia-termica").textContent = (datosSimulacion.eficiencia_termica / 100).toFixed(2);
            
            // Actualizar conclusiones
            document.getElementById("prod-anual-conclusion").textContent = datosSimulacion.produccion_total.toFixed(2);
            document.getElementById("prod-verano-primavera").textContent = 
                (datosSimulacion.datos_estacionales.Verano.porcentaje + datosSimulacion.datos_estacionales.Primavera.porcentaje).toFixed(1);
            document.getElementById("correlacion-rad-prod").textContent = datosSimulacion.correlacion_rad_prod.toFixed(2);
            document.getElementById("pct-perdidas").textContent = ((datosSimulacion.perdidas_termicas * 3600 * 6) / datosSimulacion.energia_solar * 100).toFixed(1);
            document.getElementById("area-captacion").textContent = datosSimulacion.area_captacion.toFixed(4);
        }
        
        // Cargar datos cuando se cargue la página
        window.onload = function() {
            if (typeof cargarDatosSimulacion === 'function') {
                cargarDatosSimulacion();
            } else {
                console.error("No se pudo cargar la función cargarDatosSimulacion");
                actualizarInterfaz(); // Usar datos por defecto
            }
        };
    </script>
</body>
</html> 
